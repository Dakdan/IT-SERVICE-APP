<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IT Service Management - ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Kanit', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(180deg, #fce7f3 0%, #fdf2f8 30%, #ffffff 100%);
    }
    
    .watermark {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-30deg);
      font-size: 120px;
      font-weight: 700;
      color: rgba(236, 72, 153, 0.03);
      pointer-events: none;
      white-space: nowrap;
      z-index: 0;
    }
    
    .card-shadow {
      box-shadow: 0 4px 15px rgba(236, 72, 153, 0.15);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #6366f1 0%, #818cf8 100%);
    }
    
    .btn-success {
      background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
    }
    
    .btn-warning {
      background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
    }
    
    .status-waiting {
      background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
      animation: pulse 2s infinite;
    }
    
    .status-progress {
      background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
    }
    
    .status-done {
      background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .overlay {
      backdrop-filter: blur(4px);
      background: rgba(0, 0, 0, 0.5);
    }
    
    .modal-enter {
      animation: modalIn 0.3s ease-out;
    }
    
    @keyframes modalIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
    
    .tab-active {
      background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
      color: white;
    }
    
    .priority-high {
      border-left: 4px solid #ef4444;
    }
    
    .priority-medium {
      border-left: 4px solid #f59e0b;
    }
    
    .priority-low {
      border-left: 4px solid #10b981;
    }
    
    .timer-urgent {
      color: #ef4444;
      animation: blink 1s infinite;
    }
    
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .loader {
      border: 3px solid #fce7f3;
      border-top: 3px solid #ec4899;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @media print {
      .no-print { display: none !important; }
      body { background: white !important; }
      .gradient-bg { background: white !important; }
    }
    
    .dropdown-container {
      position: relative;
    }
    
    .dropdown-list {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      max-height: 200px;
      overflow-y: auto;
      background: white;
      border: 1px solid #fce7f3;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      z-index: 50;
    }
    
    .dropdown-item {
      padding: 10px 15px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .dropdown-item:hover {
      background: #fce7f3;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #ec4899;
      box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.2);
    }

    .checkbox-custom {
      appearance: none;
      width: 20px;
      height: 20px;
      border: 2px solid #fce7f3;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .checkbox-custom:checked {
      background: #ec4899;
      border-color: #ec4899;
    }

    .checkbox-custom:checked::after {
      content: '‚úì';
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full gradient-bg">
  <div class="watermark">
   IT UDON HOSP
  </div><!-- Loading Overlay -->
  <div id="loadingOverlay" class="fixed inset-0 overlay z-50 flex items-center justify-center hidden">
   <div class="bg-white rounded-2xl p-8 card-shadow modal-enter text-center">
    <div class="loader mx-auto mb-4"></div>
    <p id="loadingText" class="text-gray-600 font-medium">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...</p>
   </div>
  </div><!-- Toast Notification -->
  <div id="toast" class="fixed top-4 right-4 z-50 hidden">
   <div id="toastContent" class="rounded-xl p-4 card-shadow flex items-center gap-3 modal-enter"><span id="toastIcon" class="text-2xl"></span> <span id="toastMessage" class="font-medium"></span>
   </div>
  </div><!-- Login Page -->
  <div id="loginPage" class="min-h-full flex items-center justify-center p-4">
   <div class="w-full max-w-md">
    <div class="bg-white rounded-3xl card-shadow p-8">
     <div class="text-center mb-8"><img src="https://img2.pic.in.th/-227e4f6f84f29f020.png" alt="Logo" class="w-20 h-20 mx-auto mb-4 rounded-full card-shadow" onerror="this.style.background='linear-gradient(135deg, #ec4899, #f472b6)'; this.alt='IT';">
      <h1 class="text-xl font-bold text-gray-800">‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ</h1>
      <p class="text-pink-500 font-medium">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</p>
      <p class="text-sm text-gray-500 mt-1">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</p>
     </div>
     <div id="loginForm">
      <div class="space-y-4">
       <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label> <input type="text" id="loginUsername" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô" class="w-full px-4 py-3 rounded-xl border-2 border-pink-100 focus:border-pink-400 transition">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label> <input type="password" id="loginPassword" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" class="w-full px-4 py-3 rounded-xl border-2 border-pink-100 focus:border-pink-400 transition">
       </div><!-- Remember Me Checkbox --> <label class="flex items-center gap-3 cursor-pointer"> <input type="checkbox" id="rememberMe" class="checkbox-custom"> <span class="text-sm text-gray-600">‡∏à‡∏≥‡∏£‡∏π‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span> </label> <button onclick="handleLogin()" class="w-full btn-primary text-white py-3 rounded-xl font-semibold">üîì ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
       <div class="flex gap-3 pt-2"><button onclick="showFirstTimeLogin()" class="flex-1 text-sm text-pink-500 hover:text-pink-600 font-medium transition">üÜï ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å</button> <button onclick="showPasswordReset()" class="flex-1 text-sm text-pink-500 hover:text-pink-600 font-medium transition">üîë ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</button>
       </div>
      </div>
     </div><!-- First Time Login Form -->
     <div id="firstTimeForm" class="hidden">
      <div class="space-y-4"><button onclick="backToLogin()" class="text-pink-500 hover:text-pink-600 font-medium mb-4 flex items-center gap-2">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
       <h2 class="text-lg font-bold text-gray-800">üìù ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å</h2>
       <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label> <input type="email" id="firstTimeEmail" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•" class="w-full px-4 py-3 rounded-xl border-2 border-pink-100 focus:border-pink-400 transition">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label> <input type="text" id="firstTimeUsername" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô" class="w-full px-4 py-3 rounded-xl border-2 border-pink-100 focus:border-pink-400 transition">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™ Verification</label> <input type="text" id="verificationCode" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô" class="w-full px-4 py-3 rounded-xl border-2 border-pink-100 focus:border-pink-400 transition">
       </div><button onclick="handleFirstTimeVerify()" class="w-full btn-secondary text-white py-3 rounded-xl font-semibold">‚úì ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</button>
      </div>
     </div><!-- Set Password Form -->
     <div id="setPasswordForm" class="hidden">
      <div class="space-y-4"><button onclick="backToLogin()" class="text-pink-500 hover:text-pink-600 font-medium mb-4 flex items-center gap-2">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
       <h2 class="text-lg font-bold text-gray-800">üîê ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</h2>
       <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label> <input type="password" id="newPassword" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)" class="w-full px-4 py-3 rounded-xl border-2 border-pink-100 focus:border-pink-400 transition">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label> <input type="password" id="confirmPassword" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" class="w-full px-4 py-3 rounded-xl border-2 border-pink-100 focus:border-pink-400 transition">
       </div><button onclick="handleSetPassword()" class="w-full btn-success text-white py-3 rounded-xl font-semibold">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</button>
      </div>
     </div><!-- Password Reset Form -->
     <div id="resetPasswordForm" class="hidden">
      <div class="space-y-4"><button onclick="backToLogin()" class="text-pink-500 hover:text-pink-600 font-medium mb-4 flex items-center gap-2">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
       <h2 class="text-lg font-bold text-gray-800">üîë ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h2>
       <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label> <input type="email" id="resetEmail" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô" class="w-full px-4 py-3 rounded-xl border-2 border-pink-100 focus:border-pink-400 transition">
       </div>
       <p class="text-sm text-gray-600">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p><button onclick="handlePasswordReset()" class="w-full btn-warning text-white py-3 rounded-xl font-semibold">üìß ‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Main Application -->
  <div id="mainApp" class="hidden min-h-full"><!-- Header -->
   <header class="bg-white card-shadow sticky top-0 z-40 no-print">
    <div class="max-w-7xl mx-auto px-4 py-3">
     <div class="flex items-center justify-between flex-wrap gap-3">
      <div class="flex items-center gap-4"><img src="https://img2.pic.in.th/-227e4f6f84f29f020.png" alt="Logo" class="w-12 h-12 rounded-full card-shadow" onerror="this.style.background='linear-gradient(135deg, #ec4899, #f472b6)'; this.alt='IT';">
       <div>
        <h1 class="text-lg font-bold text-gray-800">‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ</h1>
        <p class="text-xs text-pink-500">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô: ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</p>
        <p class="text-xs text-gray-500">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</p>
       </div>
      </div>
      <div class="flex items-center gap-4">
       <div class="flex items-center gap-3 bg-pink-50 rounded-full px-4 py-2">
        <div id="userAvatar" class="w-10 h-10 rounded-full bg-gradient-to-br from-pink-400 to-pink-500 flex items-center justify-center text-white font-bold">
         üë§
        </div>
        <div class="text-right">
         <p id="userName" class="font-semibold text-gray-800 text-sm">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
         <p id="userRole" class="text-xs text-pink-500">‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</p>
        </div>
       </div><button onclick="handleLogout()" class="bg-red-100 text-red-500 px-4 py-2 rounded-xl font-medium hover:bg-red-200 transition">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>
     </div>
    </div>
   </header><!-- Tab Navigation -->
   <nav class="max-w-7xl mx-auto px-4 py-4 no-print">
    <div class="flex gap-2 overflow-x-auto pb-2"><button onclick="switchTab(1)" id="tab1Btn" class="tab-active px-6 py-3 rounded-xl font-semibold whitespace-nowrap transition flex items-center gap-2">üìä Dashboard</button> <button onclick="switchTab(2)" id="tab2Btn" class="bg-white text-gray-600 px-6 py-3 rounded-xl font-semibold whitespace-nowrap card-shadow transition flex items-center gap-2">üíæ Backup Data</button> <button onclick="switchTab(3)" id="tab3Btn" class="bg-white text-gray-600 px-6 py-3 rounded-xl font-semibold whitespace-nowrap card-shadow transition flex items-center gap-2">üîó ‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å</button>
    </div>
   </nav><!-- Tab Content -->
   <main class="max-w-7xl mx-auto px-4 pb-8"><!-- Tab 1: Dashboard -->
    <div id="tab1Content">
     <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
      <div class="bg-white rounded-2xl card-shadow p-4 text-center">
       <div class="text-3xl mb-2">
        üìã
       </div>
       <p id="statTotal" class="text-2xl font-bold text-gray-800">0</p>
       <p class="text-sm text-gray-500">‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
      </div>
      <div class="bg-white rounded-2xl card-shadow p-4 text-center border-l-4 border-red-400">
       <div class="text-3xl mb-2">
        ‚è≥
       </div>
       <p id="statWaiting" class="text-2xl font-bold text-red-500">0</p>
       <p class="text-sm text-gray-500">‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</p>
      </div>
      <div class="bg-white rounded-2xl card-shadow p-4 text-center border-l-4 border-yellow-400">
       <div class="text-3xl mb-2">
        üîÑ
       </div>
       <p id="statProgress" class="text-2xl font-bold text-yellow-500">0</p>
       <p class="text-sm text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
      </div>
      <div class="bg-white rounded-2xl card-shadow p-4 text-center border-l-4 border-green-400">
       <div class="text-3xl mb-2">
        ‚úÖ
       </div>
       <p id="statDone" class="text-2xl font-bold text-green-500">0</p>
       <p class="text-sm text-gray-500">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</p>
      </div>
     </div>
     <div class="bg-white rounded-2xl card-shadow overflow-hidden">
      <div class="bg-gradient-to-r from-pink-500 to-pink-400 text-white px-6 py-4">
       <h2 class="font-bold text-lg">üìù ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
      </div>
      <div class="overflow-x-auto">
       <table class="w-full">
        <thead class="bg-pink-50">
         <tr>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">JobID</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏õ‡∏±‡∏ç‡∏´‡∏≤</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
          <th class="px-4 py-3 text-center text-sm font-semibold text-gray-700">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
         </tr>
        </thead>
        <tbody id="jobTicketsList" class="divide-y divide-pink-100">
        </tbody>
       </table>
      </div>
     </div>
    </div><!-- Tab 2: Backup Data -->
    <div id="tab2Content" class="hidden">
     <div class="bg-white rounded-2xl card-shadow overflow-hidden">
      <div class="bg-gradient-to-r from-indigo-500 to-indigo-400 text-white px-6 py-4">
       <h2 class="font-bold text-lg">üíæ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Backup)</h2>
      </div>
      <div class="overflow-x-auto">
       <table class="w-full">
        <thead class="bg-indigo-50">
         <tr>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Backup ID</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏ä‡∏∑‡πà‡∏≠ Backup</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Backup ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏Ç‡∏ô‡∏≤‡∏î</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
         </tr>
        </thead>
        <tbody id="backupDataList" class="divide-y divide-indigo-100">
        </tbody>
       </table>
      </div>
     </div>
    </div><!-- Tab 3: External Links -->
    <div id="tab3Content" class="hidden">
     <div class="bg-white rounded-2xl card-shadow overflow-hidden">
      <div class="bg-gradient-to-r from-indigo-500 to-indigo-400 text-white px-6 py-4">
       <h2 class="font-bold text-lg">üîó ‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å</h2>
      </div>
      <div id="externalLinksList" class="p-6 grid grid-cols-2 md:grid-cols-4 gap-4">
      </div>
     </div>
    </div>
   </main>
  </div>
  <script>
    // ============ Real Map Data ============
    const REAL_MAP_DATA = {
      itUsers: [
        { ITUSERNO: '1', UserName: '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö', UserPN: 'admin', UserTypeID: 'IT' },
        { ITUSERNO: '2', UserName: '‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô IT', UserPN: 'boss', UserTypeID: 'Boss' },
        { ITUSERNO: '3', UserName: '‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ 1', UserPN: 'tech1', UserTypeID: 'IT' },
        { ITUSERNO: '4', UserName: '‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ 2', UserPN: 'tech2', UserTypeID: 'IT' },
        { ITUSERNO: '5', UserName: '‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ 3', UserPN: 'tech3', UserTypeID: 'IT' }
      ],
      departments: [
        { DeptID: '1', Note3: '‡∏´‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à 1' },
        { DeptID: '2', Note3: '‡∏´‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à 2' },
        { DeptID: '3', Note3: '‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô' },
        { DeptID: '4', Note3: '‡∏´‡πâ‡∏≠‡∏á‡∏¢‡∏≤' },
        { DeptID: '5', Note3: '‡∏´‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î' },
        { DeptID: '6', Note3: '‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏ô 1' },
        { DeptID: '7', Note3: '‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏ô 2' },
        { DeptID: '8', Note3: '‡∏´‡πâ‡∏≠‡∏á‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô' },
        { DeptID: '9', Note3: '‡πÅ‡∏ú‡∏ô‡∏Å‡∏ó‡∏±‡∏ô‡∏ï‡∏Å‡∏£‡∏£‡∏°' },
        { DeptID: '10', Note3: '‡πÅ‡∏ú‡∏ô‡∏Å‡∏à‡∏¥‡∏ï‡πÄ‡∏ß‡∏ä' }
      ],
      backupData: [
        { BackupID: 'BK-001', BackupName: 'Windows Server 2019', BackupType: 'Full', LastBackup: '2024-01-20', Size: '500 GB', Status: 'Success' },
        { BackupID: 'BK-002', BackupName: 'HOSxP Database', BackupType: 'Incremental', LastBackup: '2024-01-21', Size: '200 GB', Status: 'Success' },
        { BackupID: 'BK-003', BackupName: 'Email Server', BackupType: 'Differential', LastBackup: '2024-01-21', Size: '150 GB', Status: 'Success' },
        { BackupID: 'BK-004', BackupName: 'File Server', BackupType: 'Full', LastBackup: '2024-01-15', Size: '1 TB', Status: 'Warning' },
        { BackupID: 'BK-005', BackupName: 'Patient Records', BackupType: 'Incremental', LastBackup: '2024-01-21', Size: '300 GB', Status: 'Success' },
        { BackupID: 'BK-006', BackupName: 'Lab System Database', BackupType: 'Full', LastBackup: '2024-01-20', Size: '50 GB', Status: 'Success' },
        { BackupID: 'BK-007', BackupName: 'Pharmacy System', BackupType: 'Incremental', LastBackup: '2024-01-21', Size: '30 GB', Status: 'Success' },
        { BackupID: 'BK-008', BackupName: 'Network Configuration', BackupType: 'Full', LastBackup: '2024-01-19', Size: '5 GB', Status: 'Success' }
      ],
      systemLinks: [
        { LinkID: '1', Name: 'HOSxP', URL: 'http://hosxp.hospital.go.th', RoleAllow: 'ALL', Active: 'Y', Linkicon: 'üè•' },
        { LinkID: '2', Name: 'E-claim', URL: 'http://eclaim.nhso.go.th', RoleAllow: 'ALL', Active: 'Y', Linkicon: 'üìã' },
        { LinkID: '3', Name: 'MOPH IC', URL: 'http://mophic.moph.go.th', RoleAllow: 'ALL', Active: 'Y', Linkicon: 'üìä' },
        { LinkID: '4', Name: '‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£', URL: 'http://hr.hospital.go.th', RoleAllow: 'IT,Boss', Active: 'Y', Linkicon: 'üë•' },
        { LinkID: '5', Name: '‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏', URL: 'http://supply.hospital.go.th', RoleAllow: 'ALL', Active: 'Y', Linkicon: 'üì¶' },
        { LinkID: '6', Name: '‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô', URL: 'http://finance.hospital.go.th', RoleAllow: 'Boss', Active: 'Y', Linkicon: 'üí∞' },
        { LinkID: '7', Name: 'Gmail', URL: 'https://mail.google.com', RoleAllow: 'ALL', Active: 'Y', Linkicon: '‚úâÔ∏è' },
        { LinkID: '8', Name: 'Google Drive', URL: 'https://drive.google.com', RoleAllow: 'ALL', Active: 'Y', Linkicon: '‚òÅÔ∏è' }
      ]
    };

    // ============ State Management ============
    let currentUser = null;
    let currentTab = 1;
    let backupData = REAL_MAP_DATA.backupData;
    let systemLinks = REAL_MAP_DATA.systemLinks;

    // ============ Storage Functions ============
    function saveLoginCredentials(username, password, rememberMe) {
      if (rememberMe) {
        localStorage.setItem('savedUsername', username);
        localStorage.setItem('savedPassword', btoa(password)); // Simple encoding
        localStorage.setItem('rememberMe', 'true');
      } else {
        localStorage.removeItem('savedUsername');
        localStorage.removeItem('savedPassword');
        localStorage.removeItem('rememberMe');
      }
    }

    function loadSavedCredentials() {
      if (localStorage.getItem('rememberMe') === 'true') {
        const savedUsername = localStorage.getItem('savedUsername');
        const savedPassword = localStorage.getItem('savedPassword');
        
        if (savedUsername && savedPassword) {
          document.getElementById('loginUsername').value = savedUsername;
          document.getElementById('loginPassword').value = atob(savedPassword);
          document.getElementById('rememberMe').checked = true;
          return true;
        }
      }
      return false;
    }

    // ============ Utility Functions ============
    function showLoading(text = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...') {
      document.getElementById('loadingText').textContent = text;
      document.getElementById('loadingOverlay').classList.remove('hidden');
    }

    function hideLoading() {
      document.getElementById('loadingOverlay').classList.add('hidden');
    }

    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      const content = document.getElementById('toastContent');
      const icon = document.getElementById('toastIcon');
      const msg = document.getElementById('toastMessage');

      const styles = {
        success: { bg: 'bg-green-100 text-green-800', icon: '‚úÖ' },
        error: { bg: 'bg-red-100 text-red-800', icon: '‚ùå' },
        warning: { bg: 'bg-yellow-100 text-yellow-800', icon: '‚ö†Ô∏è' },
        info: { bg: 'bg-blue-100 text-blue-800', icon: '‚ÑπÔ∏è' }
      };

      const style = styles[type] || styles.info;
      content.className = `rounded-xl p-4 card-shadow flex items-center gap-3 modal-enter ${style.bg}`;
      icon.textContent = style.icon;
      msg.textContent = message;

      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 3000);
    }

    function formatDate(dateStr) {
      if (!dateStr) return '-';
      const date = new Date(dateStr);
      return date.toLocaleDateString('th-TH', { 
        day: '2-digit', 
        month: '2-digit', 
        year: 'numeric'
      });
    }

    // ============ Authentication ============
    function handleLogin() {
      const username = document.getElementById('loginUsername').value.trim();
      const password = document.getElementById('loginPassword').value;
      const rememberMe = document.getElementById('rememberMe').checked;

      if (!username || !password) {
        showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô', 'warning');
        return;
      }

      showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...');

      setTimeout(() => {
        if ((username === 'admin' || username === 'boss') && password === '1234') {
          currentUser = username === 'admin' 
            ? { UserName: '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö', UserPN: 'admin', UserTypeID: 'IT' }
            : { UserName: '‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô IT', UserPN: 'boss', UserTypeID: 'Boss' };
          
          // Save credentials if remember me is checked
          saveLoginCredentials(username, password, rememberMe);
          
          hideLoading();
          showToast(`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${currentUser.UserName}`, 'success');
          showMainApp();
        } else {
          hideLoading();
          showToast('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
        }
      }, 800);
    }

    function showFirstTimeLogin() {
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('firstTimeForm').classList.remove('hidden');
    }

    function showPasswordReset() {
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('resetPasswordForm').classList.remove('hidden');
    }

    function backToLogin() {
      document.getElementById('loginForm').classList.remove('hidden');
      document.getElementById('firstTimeForm').classList.add('hidden');
      document.getElementById('resetPasswordForm').classList.add('hidden');
      document.getElementById('setPasswordForm').classList.add('hidden');
      
      // Clear inputs
      document.getElementById('firstTimeEmail').value = '';
      document.getElementById('firstTimeUsername').value = '';
      document.getElementById('verificationCode').value = '';
      document.getElementById('resetEmail').value = '';
      document.getElementById('newPassword').value = '';
      document.getElementById('confirmPassword').value = '';
    }

    function handleFirstTimeVerify() {
      const email = document.getElementById('firstTimeEmail').value.trim();
      const username = document.getElementById('firstTimeUsername').value.trim();
      const code = document.getElementById('verificationCode').value.trim();

      if (!email || !username || !code) {
        showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', 'warning');
        return;
      }

      if (!email.includes('@')) {
        showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'warning');
        return;
      }

      showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô...');

      setTimeout(() => {
        showToast('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        
        // Show set password form
        document.getElementById('firstTimeForm').classList.add('hidden');
        document.getElementById('setPasswordForm').classList.remove('hidden');
        
        hideLoading();
      }, 800);
    }

    function handleSetPassword() {
      const newPass = document.getElementById('newPassword').value;
      const confirmPass = document.getElementById('confirmPassword').value;

      if (!newPass || !confirmPass) {
        showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', 'warning');
        return;
      }

      if (newPass.length < 8) {
        showToast('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£', 'warning');
        return;
      }

      if (newPass !== confirmPass) {
        showToast('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô', 'warning');
        return;
      }

      showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...');

      setTimeout(() => {
        showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        backToLogin();
        hideLoading();
      }, 800);
    }

    function handlePasswordReset() {
      const email = document.getElementById('resetEmail').value.trim();

      if (!email) {
        showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•', 'warning');
        return;
      }

      if (!email.includes('@')) {
        showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'warning');
        return;
      }

      showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï...');

      setTimeout(() => {
        showToast('‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡πâ‡∏ß', 'success');
        backToLogin();
        hideLoading();
      }, 800);
    }

    function showMainApp() {
      document.getElementById('loginPage').classList.add('hidden');
      document.getElementById('mainApp').classList.remove('hidden');
      document.getElementById('userName').textContent = currentUser.UserName;
      document.getElementById('userRole').textContent = currentUser.UserTypeID;
      
      loadAllData();
    }

    function handleLogout() {
      showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö...');
      
      setTimeout(() => {
        currentUser = null;
        hideLoading();
        showToast('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        
        document.getElementById('mainApp').classList.add('hidden');
        document.getElementById('loginPage').classList.remove('hidden');
        
        document.getElementById('loginUsername').value = '';
        document.getElementById('loginPassword').value = '';
      }, 500);
    }

    // ============ Load Data Functions ============
    function loadAllData() {
      renderBackupData();
      renderExternalLinks();
      document.getElementById('statTotal').textContent = '0';
      document.getElementById('statWaiting').textContent = '0';
      document.getElementById('statProgress').textContent = '0';
      document.getElementById('statDone').textContent = '0';
    }

    function renderBackupData() {
      const container = document.getElementById('backupDataList');
      
      container.innerHTML = backupData.map(backup => {
        const statusClass = backup.Status === 'Success' ? 'status-done' : 'status-warning';
        const statusText = backup.Status === 'Success' ? '‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‚ö†Ô∏è ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô';
        
        return `
          <tr class="hover:bg-indigo-50 transition">
            <td class="px-4 py-3 text-sm font-semibold text-gray-800">${backup.BackupID}</td>
            <td class="px-4 py-3 text-sm text-gray-600">${backup.BackupName}</td>
            <td class="px-4 py-3 text-sm text-gray-600">
              <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs">${backup.BackupType}</span>
            </td>
            <td class="px-4 py-3 text-sm text-gray-600">${formatDate(backup.LastBackup)}</td>
            <td class="px-4 py-3 text-sm font-medium text-gray-800">${backup.Size}</td>
            <td class="px-4 py-3 text-sm">
              <span class="${statusClass} text-white px-3 py-1 rounded-full text-xs font-semibold">${statusText}</span>
            </td>
          </tr>
        `;
      }).join('');
    }

    function renderExternalLinks() {
      const container = document.getElementById('externalLinksList');
      
      const allowedLinks = systemLinks.filter(link => {
        if (link.Active !== 'Y') return false;
        if (link.RoleAllow === 'ALL') return true;
        return link.RoleAllow.split(',').includes(currentUser?.UserTypeID);
      });

      container.innerHTML = allowedLinks.map(link => `
        <a href="${link.URL}" target="_blank" rel="noopener noreferrer" 
           class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-6 text-center hover:shadow-lg transition transform hover:-translate-y-1 card-shadow">
          <div class="text-4xl mb-3">${link.Linkicon}</div>
          <p class="font-semibold text-gray-800">${link.Name}</p>
        </a>
      `).join('');
    }

    function switchTab(tabNum) {
      currentTab = tabNum;
      
      ['tab1Btn', 'tab2Btn', 'tab3Btn'].forEach((id, idx) => {
        const btn = document.getElementById(id);
        if (idx + 1 === tabNum) {
          btn.classList.add('tab-active');
          btn.classList.remove('bg-white', 'text-gray-600', 'card-shadow');
        } else {
          btn.classList.remove('tab-active');
          btn.classList.add('bg-white', 'text-gray-600', 'card-shadow');
        }
      });

      document.getElementById('tab1Content').classList.toggle('hidden', tabNum !== 1);
      document.getElementById('tab2Content').classList.toggle('hidden', tabNum !== 2);
      document.getElementById('tab3Content').classList.toggle('hidden', tabNum !== 3);
    }

    // ============ Initialize on Page Load ============
    window.addEventListener('DOMContentLoaded', () => {
      loadSavedCredentials();
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cb690f98297a18c',t:'MTc3MDY3MzY1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
